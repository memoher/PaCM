<ion-view view-title="Historial">
    <ion-content padding="true" class="has-header">
        <form name="recordsForm" ng-class="{'show-errors': showErrors}">
            <div class="row responsive-sm">
                <div class="col">
                    <div class="item item-input-inset" ng-click="searchCustomer()">
                        <label class="item-input-wrapper">
                            <input type="text" placeholder="Cliente" readonly ng-model="filters.customerName" required>
                        </label>
                        <button type="button" tabindex="-1" class="button button-small button-pacm">
                            <i class="icon ion-search"></i>
                        </button>
                    </div>
                </div>
                <div class="col">
                    <div class="item item-input-inset" ng-click="searchObjectTypeTrademark()">
                        <label class="item-input-wrapper">
                            <input type="text" placeholder="Marca" readonly ng-model="filters.objectTypeTrademarkName" required>
                        </label>
                        <button type="button" tabindex="-1" class="button button-small button-pacm">
                            <i class="icon ion-search"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div class="row responsive-sm">
                <div class="col">
                    <div class="item item-input-inset" ng-click="searchObjectTypeModel()">
                        <label class="item-input-wrapper">
                            <input type="text" placeholder="Modelo" readonly ng-model="filters.objectTypeModelName" required>
                        </label>
                        <button type="button" tabindex="-1" class="button button-small button-pacm">
                            <i class="icon ion-search"></i>
                        </button>
                    </div>
                </div>
                <div class="col">
                    <div class="item item-input-inset" ng-click="searchObjectType()">
                        <label class="item-input-wrapper">
                            <input type="text" placeholder="Bateria / cargador" readonly ng-model="filters.objectTypeDescription" required>
                        </label>
                        <button type="button" tabindex="-1" class="button button-small button-pacm">
                            <i class="icon ion-search"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div class="row responsive-sm">
                <div class="col">
                    <a class="button button-balanced button-block" href="#/app/new/{{ filters.customerId }}/{{ filters.objectTypeType }}/{{ filters.objectTypeId }}" ng-disabled="runningProcess || !recordsForm.$valid">Nuevo mantenimiento</a>
                </div>
            </div>
        </form>
        <ion-list>
            <ion-item ng-repeat="r in history" href="#/app/details/{{ r.Id }}">
                {{ r.Date | date : 'medium' }} -> 
                {{ r.Type.indexOf('Maintenance') >= 0 ? 'Mantenimiento ' : 'Ensamble ' }}
                {{ r.Type.indexOf('Battery') >= 0 ? 'bateria ' : 'cargador ' }}
                {{ r.ObjectTypeDescription }}
            </ion-item>
        </ion-list>
    </ion-content>
</ion-view>